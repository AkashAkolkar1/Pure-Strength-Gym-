<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Healthy U | Products</title>
  <link rel="stylesheet" href="styles.css"/>
      <link
      href="https://cdn.jsdelivr.net/npm/remixicon@3.4.0/fonts/remixicon.css"
      rel="stylesheet"/>
  <script src="catalog.js"></script>
  <link rel = "icon" href = "assets/logo_1.jpeg" type = "image/x-icon">
</head>
<body>
  <!-- Nav -->
  <nav>
    <div class="nav__logo">
      <a href="index.html"><img src="assets/Picture1.png" alt="Healthy U"/></a>
    </div>
      <ul class="nav__links">
  <li class="link"><a href="index.html">Home</a></li>
  <li class="link"><a href="product.html">Products</a></li>
  <li class="link"><a href="cart.html">Cart</a></li>

  <!-- Shown when logged OUT -->
  <span id="navAuth" style="display:flex; gap: 3rem;">
    <li class="link"><a href="login.html">Login</a></li>
    <li class="link"><a href="register.html">Register</a></li>
  </span>

  <!-- Shown when logged IN -->
  <span id="navUser" style="gap:2rem">
    <li class="link"><span style="color:#d1d5db;">Hi, <span id="navName">User</span></span></li>
    <li class="link"><a href="#" id="navSignOut">Sign Out</a></li>
  </span>
</ul>
  </nav>

  <!-- Header -->
  <header class="section__container header__container" style="padding-top: 3rem;">
    <div class="header__content">
      <h4>Healthy U Store</h4>
      <h1><span>Fuel</span> the gains</h1>
      <p class="section__subheader">High‑quality supplements and equipment for every training goal.</p>
    </div>
    <div class="header__image">
      <span class="bg__blur header__blur"></span>
      <img src="assets\header.png" alt="Products"/>
    </div>
  </header>

  <!-- Product Grid -->
  <section class="section__container">
    <div class="explore__header">
      <h2 class="section__header">Shop Products</h2>
      <div id="filters" style="margin:0;">
    <!-- Category by tag -->
    <button class="filter__btn" data-filter-type="tag" data-filter="all">All</button>
    <button class="filter__btn" data-filter-type="tag" data-filter="protein">Protein</button>
    <button class="filter__btn" data-filter-type="tag" data-filter="creatine">Creatine</button>
    <button class="filter__btn" data-filter-type="tag" data-filter="dumbbell">Dumbbell</button>
    <button class="filter__btn" data-filter-type="tag" data-filter="barbell">Barbell</button>
    <button class="filter__btn" data-filter-type="tag" data-filter="accessory">Accessories</button>

    <!-- Program by group (BMI mapping) -->
    <button class="filter__btn" data-filter-type="group" data-filter="gain">Gainer</button>
    <button class="filter__btn" data-filter-type="group" data-filter="strength">Strength</button>
    <button class="filter__btn" data-filter-type="group" data-filter="balance">Balance</button>
  </div>
      <div class="explore__nav">
        <span id="prev">&#8249;</span>
        <span id="next">&#8250;</span>
      </div>
    </div>

    <div id="productGrid" class="explore__grid">
      <!-- Cards rendered by JS -->
    </div>
  </section>

  <!-- Footer -->
  <footer class="section__container footer__container">
    <span class="bg__blur footer__blur"></span>
    <div class="footer__col">
      <div class="footer__logo">
        <a href="index.html"><img class="footer__logo" src="assets\logo_1.jpeg" alt="Healthy U"/></a>
      </div>
      <p>Your destination for holistic fitness and premium supplements.</p>
      <div class="footer__socials">
          <a href="#"><i class="ri-facebook-fill"></i></a>
          <a href="#"><i class="ri-instagram-line"></i></a>
          <a href="#"><i class="ri-twitter-fill"></i></a>
      </div>
    </div>
    <div class="footer__col">
      <h4>Company</h4>
      <a href="#">About</a>
      <a href="#">Trainers</a>
      <a href="#">Membership</a>
    </div>
    <div class="footer__col">
      <h4>Support</h4>
      <a href="#">Help Center</a>
      <a href="#">Contact</a>
      <a href="#">Terms</a>
    </div>
    <div class="footer__col">
      <h4>Shop</h4>
      <a href="product.html">Products</a>
      <a href="cart.html">Cart</a>
      <a href="checkout.html">Checkout</a>
    </div>
  </footer>
  <div class="footer__bar">© 2025 Healthy U. All rights reserved.</div>

<script>
  const CART_KEY = 'hu_cart';
  function getCart(){ return JSON.parse(localStorage.getItem(CART_KEY)||'[]'); }
  function setCart(c){ localStorage.setItem(CART_KEY, JSON.stringify(c)); }
  function addToCart(item){
    const cart = getCart();
    const idx = cart.findIndex(p=>p.id===item.id);
    if(idx>-1){ cart[idx].qty += 1; } else { cart.push({...item, qty:1}); }
    setCart(cart);
    alert('Added to cart');
  }




  function renderProducts(list){
    const grid = document.getElementById('productGrid');
    grid.innerHTML = '';
    list.forEach(p=>{
      const card = document.createElement('div');

      card.className = 'explore__card';

      card.innerHTML = `
  <div class="explore__card">
    <a href="details.html?id=${encodeURIComponent(p.id)}">
      <img src="${p.img}" alt="${p.name}" />
      <h5>HealthyU</h5>
      <h4>${p.name}</h4>
    </a>
    <p style="color:#fff; font-weight:600;">₹${p.price}</p>
    <div style="display:flex; gap:0.5rem;">
      <a href="cart.html" class="btn"
         onclick="addToCart({id:'${p.id}', name:'${p.name.replace(/'/g, "\\'")}', price:${p.price}, img:'${p.img.replace(/'/g, "\\'")}'})">
         Add to Cart
      </a>
      <a href="checkout.html" class="price__btn"
         onclick="addToCart({id:'${p.id}', name:'${p.name.replace(/'/g, "\\'")}', price:${p.price}, img:'${p.img.replace(/'/g, "\\'")}'})">
         Buy Now
      </a>
    </div>
  </div>
`;

     /* card.innerHTML = `
  <div class="explore__card" data-id="${p.id}" data-name="${p.name}" data-price="${p.price}" data-img="${p.img}">
    <a href="details.html?id=${encodeURIComponent(p.id)}" class="pd-link">
      <img src="${p.img}" alt="${p.name}" />
      <h4>${p.name}</h4>
    </a>
    <p style="color:#fff; font-weight:600;">₹${p.price}</p>
    <div style="display:flex; gap:0.5rem;">
      <a href="cart.html" class="btn add-btn">Add to Cart</a>
      <a href="checkout.html" class="price__btn buy-btn">Buy Now</a>
    </div>
  </div>
`;*/
      grid.appendChild(card);
    });
  }

  // Assumptions:
  // - window.CATALOG is loaded (from catalog.js)
  // - renderProducts(list) exists and renders into #productGrid
  // - Your existing URL filter code sets an initial "list"

  const catalog = window.catalog || [];
  const gridEl = document.getElementById('productGrid');

  // Helper to render filtered lists
  function applyFilter({ type, value }){
    let filtered = catalog.slice();

    if(type === 'group'){
      if(value !== 'all'){
        filtered = filtered.filter(p => (p.group === value) || p.group === 'all');
      }
    } else if(type === 'tag'){
      if(value !== 'all'){
        filtered = filtered.filter(p => (p.tag === value));
      }
    }

    // Visual active state
    document.querySelectorAll('#filters .btn, #filters .price__btn').forEach(b=>{
      b.style.outline = 'none';
      b.style.filter = 'none';
      b.dataset.active = 'false';
    });
    const matchBtn = document.querySelector(`#filters [data-filter-type="${type}"][data-filter="${value}"]`);
    if(matchBtn){
      matchBtn.dataset.active = 'true';
      matchBtn.style.filter = 'brightness(1.1)';
      matchBtn.style.outline = '1px solid var(--secondary-color)';
    }

    // Render
    renderProducts(filtered);
  }

  // Initialize from URL (?filter=gain|strength|balance)
  (function initFromURL(){
    const params = new URLSearchParams(location.search);
    const f = params.get('filter');
    if(f === 'gain' || f === 'strength' || f === 'balance'){
      applyFilter({ type:'group', value:f });
    } else {
      applyFilter({ type:'tag', value:'all' });
    }
  })();

  // Click handlers
  document.getElementById('filters').addEventListener('click', (e)=>{
    const btn = e.target.closest('button[data-filter-type]');
    if(!btn) return;
    const type = btn.getAttribute('data-filter-type'); // 'tag' | 'group'
    const value = btn.getAttribute('data-filter');
    applyFilter({ type, value });
    // Update URL without reload for shareability
    const params = new URLSearchParams(location.search);
    if(type === 'group'){
      if(value === 'all') params.delete('filter');
      else params.set('filter', value);
    } else {
      // If tag chip used, clear group filter to avoid confusion
      params.delete('filter');
    }
    const newUrl = location.pathname + (params.toString() ? '?' + params.toString() : '');
    history.replaceState({}, '', newUrl);
  });

  // Keep your chevrons behavior
  document.getElementById('prev')?.addEventListener('click', ()=>window.scrollTo({top:0,behavior:'smooth'}));
  document.getElementById('next')?.addEventListener('click', ()=>window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'}));



  // after grid is populated
document.querySelectorAll('.add-btn').forEach(btn=>{
  btn.addEventListener('click', (e)=>{
    const card = e.currentTarget.closest('.explore__card');
    addToCart({
      id: card.dataset.id,
      name: card.dataset.name,
      price: Number(card.dataset.price),
      img: card.dataset.img
    });
  });
});

document.querySelectorAll('.buy-btn').forEach(btn=>{
  btn.addEventListener('click', (e)=>{
    const card = e.currentTarget.closest('.explore__card');
    addToCart({
      id: card.dataset.id,
      name: card.dataset.name,
      price: Number(card.dataset.price),
      img: card.dataset.img
    });
    // allow normal navigation to checkouthujkl 
  });
});


  // Read filter from URL: gain | strength | balance
  const params = new URLSearchParams(location.search);
  const filter = params.get('filter'); // null when clicked via nav "Products"
  let filtered = catalog;

  if(filter === 'gain'){
    filtered = catalog.filter(p=>p.group==='gain' || p.group==='all');
  } else if(filter === 'strength'){
    filtered = catalog.filter(p=>p.group==='strength' || p.group==='all');
  } else if(filter === 'balance'){
    filtered = catalog.filter(p=>p.group==='balance' || p.group==='all');
  } // else show all

  // Hook up simple scroll pager icons
  document.getElementById('prev').addEventListener('click', ()=>window.scrollTo({top:0,behavior:'smooth'}));
  document.getElementById('next').addEventListener('click', ()=>window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'}));

  renderProducts(filtered);
</script>

<script src="auth.js"></script>


</body>
</html>
